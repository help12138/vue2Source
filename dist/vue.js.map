{"version":3,"file":"vue.js","sources":["../src/observe/index.js","../src/state.js","../src/init.js","../src/index.js"],"sourcesContent":["class Observe{\r\n    constructor(data){\r\n        this.walk(data);\r\n    }\r\n    walk(data){  // 循环对象，对属性依次劫持\r\n        // 重新定义属性\r\n        Object.keys(data).forEach(key => defineReactive(data, key, data[key]))\r\n    }\r\n}\r\n\r\nexport function defineReactive(target, key, value){\r\n    observe(value)  // 对所有的对象都进行属性劫持\r\n    Object.defineProperty(target,key,{\r\n        get(){ // 取值的时候执行get\r\n            return value\r\n        },\r\n        set(newValue){ // 修改的时候执行set\r\n            if(newValue === value) return\r\n            value = newValue\r\n        }\r\n    })\r\n}\r\n\r\nexport function observe(data){\r\n    // 数据劫持\r\n\r\n    if (typeof data !== 'object' || data == null){\r\n        return  // 只对对象劫持\r\n    }\r\n    // console.log(data, \"数据劫持\")\r\n    return new Observe(data)\r\n}","import { observe } from './observe/index'\r\n\r\nexport function initState(vm){ // 初始化状态\r\n    const opts = vm.$options\r\n    if(opts.data){\r\n        initData(vm)\r\n    }\r\n}\r\n\r\nfunction proxy(vm, target, key) {\r\n    Object.defineProperty(vm, key,{\r\n        get(){\r\n            return vm[target][key]  // vm._data.name\r\n        },\r\n        set(newValue){\r\n            vm[target][key] = newValue\r\n        }\r\n    })\r\n}\r\n\r\nfunction initData(vm){\r\n    let data = vm.$options.data  // data可能是函数或者数据\r\n    data =  typeof data === 'function' ? data.call(vm) : data\r\n    // console.log(data, '初始化数据')\r\n\r\n    vm._data = data  // 将返回的对象放到_data上\r\n    observe(data)  // 将data数据进行劫持\r\n\r\n    // 将vm._data 用vm来代理\r\n    for(let key in data){\r\n        proxy(vm, '_data', key)\r\n    }\r\n    \r\n}","import { initState } from './state'\r\n\r\n\r\nexport function initMixin(Vue){ // 给Vue增加init方法\r\n    Vue.prototype._init = function(option){  // 用于初始化操作\r\n        const vm = this\r\n        vm.$options = option  // 将用户数据选项挂载在实例上\r\n\r\n        initState(vm)  // 初始化状态\r\n    }\r\n}\r\n","import { initMixin } from './init'\r\n\r\nfunction Vue(option){\r\n    this._init(option)\r\n}\r\n\r\ninitMixin(Vue)  // 扩展了init方法\r\n\r\nexport default Vue"],"names":["Observe","data","walk","Object","keys","forEach","key","defineReactive","target","value","observe","defineProperty","get","set","newValue","initState","vm","opts","$options","initData","proxy","call","_data","initMixin","Vue","prototype","_init","option"],"mappings":"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"}